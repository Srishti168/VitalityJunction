<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Donor Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="script/angular.min.js"></script>
  <script>
    var module=angular.module("myModule",[]);
    module.controller("myController",function($scope,$http)
    {
      $scope.donors=function()
      {
        // alert("hi");
         var url="/donors";
         $http.get(url).then(done,fail);
         function done(resJSON)
         {
          // alert(JSON.stringify(resJSON.data));
          $scope.jsonArray=resJSON.data;
         }
         function fail(err)
         {
          alet(err);
         }

      }

      $scope.deldonor=function(email)
      {
        var url="/del_donor?kemail="+email;
        $http.get(url).then(done,fail);
         function done(resJSON)
         {
          // alert("done");
          $scope.donors();
      
         }
         function fail(err)
         {
          alet(err);
         }
      }
      $scope.dofindp=function()
      {
        // alert();
        $scope.pdon=localStorage.getItem("active");
        // alert($scope.pdon);
      }


    })


  </script>
  </head>
  <body ng-app="myModule" ng-controller="myController" ng-init="dofindp();">
    <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
      <div class="container-fluid" style="background-color:lightseagreen;">
        <a class="navbar-brand"  style="font-family:Georgia, 'Times New Roman', Times, serif; font-size:30px;">Vitality Junction</a>
          
        <div style="font-size: 20px;">
           {{pdon}}
        </div>
             
        </div>
    </nav>




   <div class="container">
    <div class="row">
      <div class="col-md-4 offset-md-5 mt-2">
         <input type="button" value="Show All Donors" class="btn btn-outline-info" ng-click="donors()">
      </div>
    </div>
    </div>


    <div class="col-md-10 offset-md-1 mt-4">
    <table class="table table-dark table-hover">
       <tr  align="center">
        <td >Name</td>
        <td>Email</td>
        <td>Mobile</td>
        <td>Address</td>
        <td>City</td>
        <td>Id Proof</td>
        <td>Operations</td>
        <tr ng-repeat="obj in jsonArray" align="center">
          <td >{{obj.name}}</td>
          <td>{{obj.email}}</td>
          <td>{{obj.mobile}}</td>
          <td>{{obj.address}}</td>
          <td>{{obj.city}}</td>
          <td align="center">
            <img src="uploads/{{obj.pic}}" style="height: 100px; width: 100px;" alt="">
          </td>
          <td>
            <input type="button" value="Delete" class="btn btn-outline-danger" ng-click="deldonor(obj.email);">
          </td>
        </tr>
       </tr>
    </table>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  </body>
</html>