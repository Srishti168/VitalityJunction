<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Donor Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
      function doPrev(refFile,prevImg)
    {
        const [file] = refFile.files
        if (file) {
          prevImg.src = URL.createObjectURL(file);
          $("#prevImg").css("height","100px");
        }
    
      }


    </script>
   
     <script>
      $(document).ready(function()
      {
        // alert("hello");
        $("#txtName").blur(function()
        {
          // alert("txtEmail");
        })
         $("#search-btn").click(function()
         {

          var kemail=$("#txtEmail").val();
          // alert(kemail);
          var obj={
            type:"get",
            url:"/chk-em",
            data:{
              kuchemail:kemail
            }
          }
            $.ajax(obj).done(function(resJSON)
            {
            //  alert(JSON.stringify(resJSON));
            //  $("#txtEmail").val(resJSON[0].email);
             $("#txtName").val(resJSON[0].name);
             $("#txtMobile").val(resJSON[0].mobile);
             $("#txtAdd").val(resJSON[0].address);
             $("#txtCity").val(resJSON[0].city);
            //  $("#txt-proof").val(resJSON[0].proof);
            // var p=$("#txt-proof").value;
            var pr=resJSON[0].proof;
            $("div.id_100 select").val(pr);
            // alert(pr);
             var time=(resJSON[0].timing);
             var spl=time.split(" to ");
            
             $("#from").val(spl[0]);
             $("#to").val(spl[1]);
             $("#prevImg").prop("src","uploads/"+resJSON[0].pic).css("height","100px");
             $("#hdn").val(resJSON[0].pic);

            }).fail(function(err)
            {

            })
          
         })
         
      })
      function pdonor()
      {
        var a=localStorage.getItem("active");
        document.getElementById("txtEmail").value=a;
        document.getElementById("txtEmail").setAttribute("readonly", true);
        
      }
     </script>  
  </head>

  <body onload="pdonor()">
   <!-- Navbar -->
   <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
    <div class="container-fluid " style="background-color:lightseagreen;">
        <a class="navbar-brand"  style="font-family:Georgia, 'Times New Roman', Times, serif; font-size:30px;">Vitality Junction</a>
      
    </div>

</nav>



  
<div class="container">
  <div class="row">

<form class="row g-3" method="post" enctype="multipart/form-data">
  
  <div class="container">
      <div class="row mt-2">
  <div class="col-md-7 offset-md-2 ">
    <label for="inputEmail4" class="form-label">Email</label>
  
  </div>
  <div class="col-md-7 offset-md-2">
    <input type="email" class="form-control" id="txtEmail" name="txtEmail" >
    </div>
  <div class="col-md-1" style="padding-left: 5px; padding-top: 1px;">
    <button type="button" class="btn btn-dark" id="search-btn">Search</button>
  </div>
  <div class="col-md-4 offset-md-2 mt-3">
      <label  class="form-label">Name</label>
      <input type="text" class="form-control" id="txtName" name="txtName"  required>
    </div>
    <div class="col-md-4 mt-3">
      <label for="inputEmail4" class="form-label">Contact No.</label>
      <input type="number" class="form-control" name="txtMobile" id="txtMobile" required >
    </div>
  
  
  <div class="col-md-5 offset-md-2 mt-3">
    <label for="inputAddress" class="form-label">Address</label>
    <input type="text" class="form-control" placeholder="1234 Main St" id="txtAdd" name="txtAdd" required>
  </div>
  <div class="col-md-3 mt-3">
    
    
    <label for="" class="form-label" >City</label>
    <input type="text" class="form-control" name="txtCity" id="txtCity" required>

  </div>

  <div class="col-md-3 offset-md-2 mt-3">
      <label class="form-label">ID Proof</label>
      <div class="id_100">
      <select class="form-select" name="txtProof" id="txt-proof" required>
        <option value="">ID Proof</option>
        <option value="Aadhar Card">Aadhar Card</option>
        <option value="Driving License"> Driving License</option>
        <option  value="Pan Card">Pan Card</option>
        </select>
        </div>
    </div>
    <div class="col-md-3 mt-3">
      <div>
      <label  class="form-label">Id Proof Pic</label>
      </div>
      <input type="file" accept="image/*" id="imgSelect" name="ppic" onchange="doPrev(imgSelect,prevImg)">
    </div>
    <div class="col-md-3 mt-3">
      <label for="inputEmail4" class="form-label" >Image Selected</label>
      <div>
     <img src="" alt="" id="prevImg"  >
     </div>
    </div>
    <div class="col-md-5 offset-md-2 mt-3 ">
      <label for="appt">Availability hours</label>
     <span class="m-2">From:</span>
<input type="time" id="from" name="from"
       min="09:00" max="18:00" value="" required>
       <span class="m-2">To:</span>
       <input type="time" id="to" name="to"
       min="09:00" max="18:00" required>

    </div>
  
  <div class="col-4 offset-md-4 mt-3">
    <div class="d-grid gap-2 d-md-block">
      <button class="btn btn-success" type="submit" formaction="/profile">Submit</button>
      <button class="btn btn-primary" type="submit" formaction="profile-upd">Update</button>
    </div>
  </div>
  <input type="hidden" id="hdn" name="hdn" >
</div>
</div>
</form>




















    

    
   </div>
   </div>






   
   


   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  </body>
</html>